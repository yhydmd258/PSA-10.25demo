#include "project_cfg.h" 
#ifdef  CTP_MODULE
/******************************************************************************								
*  Name: .c
*  Description: 
*  Project: C_demo
*  Auther:  shanghai tianma
*              R&D center
*              penghu
*  MCU: S9KEAZ128AMLH
*  Comment:
******************************************************************************/		
#ifdef  DESERIALIZE_MODULE
#include "../Deserialize/deserialize_if.h"
#ifdef DEBUG
#include "../Deserialize/deserialize_uart.h"
#endif
#endif  

#include "CTP_if.h"
#include "CTP_ctrl.h"
#include "../PIT/pit_if.h"
#ifdef LED_MODULE
#include "../LED/LED_if.h"
#endif

/**********************************************************************************************
* External objects
**********************************************************************************************/

/**********************************************************************************************
* Global variables
**********************************************************************************************/

/**********************************************************************************************
* Constants and macros
**********************************************************************************************/


/**********************************************************************************************
* Local types
**********************************************************************************************/


/**********************************************************************************************
* Local function prototypes
*********************************************************************************************/

/**********************************************************************************************
* Local variables
**********************************************************************************************/

/**********************************************************************************************
* Local functions
**********************************************************************************************/

/**********************************************************************************************
* Global functions
**********************************************************************************************/



/***********************************************************************************************
*
* @brief    CTP_If_Init() - Program entry function
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_Init(void)
{
    CTP_Ctrl_Init();
}

/***********************************************************************************************
*
* @brief    CTP_If_Init() - Program entry function
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_2ms_Task(void)
{
//    CTP_Ctrl_Cmd_Make();
}

/***********************************************************************************************
*
* @brief    CTP_If_Init() - Program entry function
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_Touch_Init(void)
{
    CTP_Ctrl_Touch_Init();
}

/***********************************************************************************************
*
* @brief    CTP_If_Init() - Program entry function
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_Standby_Set(UINT8 standby_state)
{
    CTP_Ctrl_Standby_Set(standby_state);
}
/***********************************************************************************************
*
* @brief    CTP_If_Init() - Program entry function
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_Touch_Interrupt_Notice(void)
{
}

/***********************************************************************************************
*
* @brief    CTP_If_Init() - Program entry function
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_Task(void)
{
    CTP_Ctrl_Task();//if inpin is low,read data from CTP IC
    CTP_Ctrl_Cmd_Make();
}

/***********************************************************************************************
*
* @brief    CTP_If_Init() - Program entry function
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_Cmd_Send(UINT8* data, UINT8 data_size)
{
#ifdef  DESERIALIZE_MODULE
#if 1
    Deserialize_If_Cmd_Send(data, data_size);
#else
                         /*  10%     10%,    15%,   20%,   25%,   30%,   35%,   40%,    45%,  50%,
                                               55%,    60%,   65%,   70%,   75%,   80%,   85%,    90%,    95%   95%*/
    UINT8   backlight[20]={0x0A,0x0A,0x0F,0x14,0x19,0x1E,0x23,0x28,0x2D,0x32,
                            0x37,0x3C,0x41,0x46,0x4B,0x50,0x55,0x5A,0x5F,0x5F};
    UINT8   backlight_index=0;
    UINT16  coordinate_x=0;
    
    coordinate_x = data[10]*256+data[9];
    backlight_index = coordinate_x/100;
    
    LED_If_Set_Backlight(backlight[backlight_index]);
#endif
#endif
}

/***********************************************************************************************
*
* @brief    CTP_If_Des_Set_Cds()
* @param    none
* @return   none
*
************************************************************************************************/
void CTP_If_Des_Set_Cds(UINT8 level)
{
#ifdef  DESERIALIZE_MODULE
    Deserialize_If_Set_Cds(level);
#endif
}

#endif /* CTP_MODULE */
