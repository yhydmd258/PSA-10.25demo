/******************************************************************************
*  Name: .c
*  Description:
*  Project: SGM
*  Auther:  shanghai tianma
*              R&D center
*              penghu
*  MCU: S9KEAZ128AMLH
*  Comment:
******************************************************************************/
#include "project_cfg.h" 
#ifdef	KEY_MODULE
#include <string.h>

#include "key_if.h"
#include "key_ctrl.h"

#ifdef FTM_MODULE
#include "../FTM/FTM_if.h"
#endif

#ifdef DESERIALIZE_MODULE
#include "../Deserialize/deserialize_if.h"
#endif
/**********************************************************************************************
* External objects
**********************************************************************************************/

/**********************************************************************************************
* Global variables
**********************************************************************************************/

/**********************************************************************************************
* Constants and macros
**********************************************************************************************/

/**********************************************************************************************
* Local types
**********************************************************************************************/

/**********************************************************************************************
* Local function prototypes
*********************************************************************************************/

/**********************************************************************************************
* Local variables
**********************************************************************************************/

/**********************************************************************************************
* Local functions
**********************************************************************************************/

/**********************************************************************************************
* Global functions
**********************************************************************************************/
/***********************************************************************************************
*
* @brief      Init the Key pwm
* @param    none
* @return   none
*
************************************************************************************************/
void Key_If_Init(void)
{
    Key_Ctrl_Init();
}

/***********************************************************************************************
*
* @brief      Deinit the Key pwm
* @param    none
* @return   none
*
************************************************************************************************/
void Key_If_Deinit(void)
{
    Key_Ctrl_Deinit();
}

/***********************************************************************************************
*
* @brief      Task function
* @param    none
* @return   none
*
************************************************************************************************/
void Key_If_Task(void)
{
    Key_Ctrl_Pwm_Cmd_Make();
}
/***********************************************************************************************
*
* @brief      analyze the command received from the MMI
* @param    none
* @return   none
*
************************************************************************************************/
void Key_If_Pwm_Cmd_Analyze(uint8_t* cmd_data)
{
    Key_Ctrl_Pwm_Cmd_Analyze(cmd_data);
}


/***********************************************************************************************
*
* @brief      save the command data which will be sent
* @param    cmd_data: the data need to be made into standard frame
                data_size:  the size of the data need to be made into standard frame
* @return   none
*
************************************************************************************************/
void Key_If_Pwm_Cmd_Send_Save(uint8_t* cmd_data, uint8_t data_size)
{
#ifdef DESERIALIZE_MODULE
    Deserialize_If_Send_Cmd_Save(cmd_data, data_size, 0, NULL, 0);
#endif
}


/***********************************************************************************************
*
* @brief      adjust the PWM by calling the FTM API
* @param    "params" is permillage
* @return   none
*
************************************************************************************************/
void Key_If_Pwm_Set(uint16_t pwm_value)
{
#ifdef FTM_MODULE
    FTM_If_Set_Key_PWM(pwm_value);
#endif
}

#endif
