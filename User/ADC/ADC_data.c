/******************************************************************************								
*  Name: .c
*  Description: 
*  Project: C_demo
*  Auther:  shanghai tianma
*              R&D center
*              penghu
*  MCU: S9KEAZ128AMLH
*  Comment:
******************************************************************************/		
#include "project_cfg.h" 
#ifdef ADC_MODULE
#include "ADC_data.h"
#include "adc.h"

/**********************************************************************************************
* External objects
**********************************************************************************************/


/**********************************************************************************************
* Global variables
**********************************************************************************************/

/**********************************************************************************************
* Constants and macros
**********************************************************************************************/


/**********************************************************************************************
* Local types
**********************************************************************************************/


/**********************************************************************************************
* Local function prototypes
*********************************************************************************************/

/**********************************************************************************************
* Local variables
**********************************************************************************************/


/**********************************************************************************************
* Local functions
**********************************************************************************************/


/**********************************************************************************************
* Global functions
**********************************************************************************************/

/***********************************************************************************************
*
* @brief    init ADC module
* @param    none
* @return   none
*
************************************************************************************************/
void ADC_Data_Init(void)
{
    ADC_ConfigType  ADC_Config={{0}};

    ADC_Config.u8ClockSource = CLOCK_SOURCE_BUS_CLOCK;
    ADC_Config.u8ClockDiv = ADC_ADIV_DIVIDE_4;
    ADC_Config.u8Mode = ADC_MODE_12BIT;
    ADC_Config.sSetting.bContinuousEn = 1;
    ADC_Config.u16PinControl = 0xE000;  /* disable I/0 control on ADC channel 13,14,15 */

    ADC_Init(ADC, &ADC_Config);
}

/***********************************************************************************************
*
* @brief    deinit ADC module
* @param    none
* @return   none
*
************************************************************************************************/
void ADC_Data_Deinit(void)
{
    ADC_DeInit(ADC);
}

/***********************************************************************************************
*
* @brief    get the ADC value of the NTC in the LED(backlight) 
* @param    none
* @return   uint16_t the value of ADC
*
************************************************************************************************/
uint16_t ADC_Data_LED_NTC_Get(void)
{
    return ADC_PollRead(ADC,ADC_CHANNEL_AD15);
}

/***********************************************************************************************
*
* @brief    get the ADC value of the input voltage
* @param    none
* @return   uint16_t: the value of ADC
*
************************************************************************************************/
uint16_t ADC_Data_Input_Vol_Get(void)
{
    return ADC_PollRead(ADC,ADC_CHANNEL_AD14);
}

/***********************************************************************************************
*
* @brief    get the ADC value of the NTC in the PCB
* @param    none
* @return   uint16_t: the value of ADC
*
************************************************************************************************/
uint16_t ADC_Data_PCB_NTC_Get(void)
{
    return ADC_PollRead(ADC,ADC_CHANNEL_AD13);
}

#endif /* ADC_MODULE */
